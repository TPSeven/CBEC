<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.neusoft.cbec.dao.IRoleDao">

  <resultMap id="RoleResultMap" type="Role">
  	<id property="id" column="role_id" />
  	<result property="name" column="role_name"/>
  </resultMap>
  
  <resultMap id="RoleWithUsersResultMap" type="Role" extends="RoleResultMap">
  	<!-- <collection property="users" column="role_id" select="com.neusoft.cbec.dao.IUserDao.selectListByRole"/> -->
  	<collection property="users" resultMap="com.neusoft.cbec.dao.IUserDao.UserResultMap"/>
  </resultMap>
  
  
  <!--取得所有角色列表，无关联用户  -->
  <select id="selectListByAll" resultMap="RoleResultMap">
    select *
    from Role
  </select>
  
  <!--取得所有角色列表，关联用户  -->
  <select id="selectListWithUsersByAll" resultMap="RoleWithUsersResultMap">
    select r.*,u.* 
    from ROLE r
    inner join UUSER u
    on r.role_id = u.role_id
  </select>
  
  <select id="selectRoleById" parameterType="int" resultMap="RoleResultMap">
    select *
    from Role
    where role_id = #{id}
  </select>
  
</mapper>